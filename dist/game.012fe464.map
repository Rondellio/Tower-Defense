{"version":3,"sources":["js/CST.js","js/scenes/MenuScene.js","js/scenes/GameScene.js","js/scenes/LoadScene.js","js/game.js"],"names":["CST","SCENES","LOAD","MENU","GAME","MenuScene","key","data","console","log","add","image","setOrigin","setDepth","newGame","game","renderer","width","height","setInteractive","on","scene","start","Phaser","Scene","path","TOWER_GROUP","ENEMY_GROUP","ATTACKS_GROUP","THIS_SCENE","ENEMY_SPEED","ENEMY_HP","ENEMY_SPAWN_RATE","ATTACK_DAMAGE","TOWER_FIRE_RATE","peasantStats","towerId","towerName","upgrade","str","atkRange","atkType","atkRate","hitfly","soldierStats","archerStats","apprenticeStats","knightStats","duelistStats","riflemanStats","rangerStats","wizardStats","sorceressStats","commanderStats","paladinStats","swordmasterStats","cutpurseStats","cannoneerStats","sharpshooterStats","beastmasterStats","assassinStats","firemageStats","icemageStats","lightningmageStats","warlockStats","priestessStats","towerArr","map","buildMap","graphics","drawLines","lineTo","lineStyle","draw","background","sound","volume","loop","nextEnemy","physics","overlap","damageEnemy","input","mouse","disableContextMenu","userAction","pointer","i","Math","floor","y","j","x","leftButtonDown","newTower","get","placeTower","currTower","upgradeTower","rightButtonDown","tower","removeTower","getEnemy","distance","enemyUnits","getChildren","length","active","Distance","Between","enemy","attack","setActive","setVisible","receiveDamage","moveTo","strokePath","addAttack","angle","fire","Enemy","follower","t","vec","Vector2","hp","turned","healthbar","HealthBar","getPoint","setPosition","damage","decrease","play","destroy","death","time","delta","anims","GameObjects","Sprite","Deathknight","call","create","frames","generateFrameNames","prefix","end","frameRate","repeat","Tower","stats","nextTic","hitFly","text","font","fill","upgradeSound","remove","tweens","targets","duration","scaleX","scaleY","alpha","yoyo","Angle","Peasant","Image","Soldier","bar","Graphics","value","p","existing","amount","clear","fillStyle","fillRect","d","Attack","incX","incY","lifespan","speed","GetSpeed","particles","emitter","createEmitter","scale","quantity","blendMode","startFollow","dx","cos","dy","sin","explode","GameScene","group","classType","eval","runChildUpdate","startOnPath","LoadScene","load","atlas","frameWidth","frameHeight","audio","config","type","AUTO","parent","default","render","pixelArt","Game","mainGame","ATTACK_GROUP","setPadding","setText","Archer","preload","spritesheet","middleButtonDown"],"mappings":"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","file":"game.012fe464.map","sourceRoot":"..","sourcesContent":["export const CST = {\n    SCENES: {\n        LOAD: \"LOAD\",\n        MENU: \"MENU\",\n        GAME: \"GAME\"\n    }\n}\n","import { CST} from \"../CST\";\n\nexport class MenuScene extends Phaser.Scene{\n    constructor(){\n        super({\n            key: CST.SCENES.MENU\n        })\n    }\n    init(data){\n        console.log(data);\n    }\n   /* preload(){\n        this.load.image('menuscreen', 'assets/bg.png', { frameWidth: 640, frameHeight: 512 });\n        this.load.image('newgame', 'assets/new.png');\n    }*/\n    create(){\n        //Creating menu screen background layers\n        this.add.image(0, 0, 'menuscreen').setOrigin(0).setDepth(0);\n        let newGame = this.add.image(this.game.renderer.width / 2, this.game.renderer.height / 2, 'newgame').setDepth(1);\n        console.log(\"In Menu Scene\");\n\n        newGame.setInteractive();\n        newGame.on(\"pointerdown\", ()=>{\n            this.scene.start(CST.SCENES.GAME, \"Starting New Game\");\n        })\n    }\n}\n","import {CST} from \"../CST\";\n//import {Enemy} from \"../Enemy\";\n//import {GlobalVariables} from \"../GlobalVariables\";\n\n//--------------------------------------------------GLOBAL VARIABLES-------------------------------------------\nvar path;\nvar TOWER_GROUP = [];\nvar ENEMY_GROUP;\nvar ATTACKS_GROUP;\nvar THIS_SCENE;\n\nvar ENEMY_SPEED = 1/10000;\n//var ENEMY_SPEED = 1/Math.floor((Math.random() * 10000) + 10000);\nvar ENEMY_HP = 1000;\nvar ENEMY_SPAWN_RATE = 2000;\n//var ENEMY_SPAWN_RATE = Math.floor((Math.random() * 1000) + 1000);\nvar ATTACK_DAMAGE = 50;\nvar TOWER_FIRE_RATE = 300;\n\n//stats for each tower type loaded from file rather than defined here, but for now do this\n//objects to hold sounds and animation information as well?\nvar peasantStats = \t\t {towerId:0,  towerName:\"Peasant\", \t\t upgrade:true,  str:5,  atkRange:\"short\",     atkType:\"physical\", atkRate:\"slow\", \t  hitfly:false};\nvar soldierStats = \t\t {towerId:1,  towerName:\"Soldier\", \t\t upgrade:true,  str:10, atkRange:\"short\",     atkType:\"physical\", atkRate:\"medium\",   hitfly:false};\nvar archerStats = \t\t {towerId:2,  towerName:\"Archer\", \t\t upgrade:true,  str:8,  atkRange:\"medium\",    atkType:\"physical\", atkRate:\"slow\", \t  hitfly:true};\nvar apprenticeStats = \t {towerId:3,  towerName:\"Apprentice\", \t upgrade:true,  str:7,  atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"medium\",   hitfly:false};\nvar knightStats = \t\t {towerId:4,  towerName:\"Knight\", \t\t upgrade:true,  str:15, atkRange:\"short\",     atkType:\"physical\", atkRate:\"medium\",   hitfly:false};\nvar duelistStats = \t\t {towerId:5,  towerName:\"Duelist\", \t\t upgrade:true,  str:12, atkRange:\"short\",     atkType:\"physical\", atkRate:\"fast\", \t  hitfly:false};\nvar riflemanStats =\t \t {towerId:6,  towerName:\"Rifleman\", \t upgrade:true,  str:20, atkRange:\"medium\",    atkType:\"physical\", atkRate:\"slow\", \t  hitfly:true};\nvar rangerStats = \t\t {towerId:7,  towerName:\"Ranger\", \t\t upgrade:true,  str:14, atkRange:\"medium\",    atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar wizardStats = \t\t {towerId:8,  towerName:\"Wizard\", \t\t upgrade:true,  str:10, atkRange:\"medium\", \t  atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar sorceressStats = \t {towerId:9,  towerName:\"Sorceress\", \t upgrade:true,  str:13, atkRange:\"medium\", \t  atkType:\"magical\",  atkRate:\"slow\", \t  hitfly:true};\nvar commanderStats = \t {towerId:10, towerName:\"Commander\", \t upgrade:false, str:25, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"slow\", \t  hitfly:false};\nvar paladinStats = \t\t {towerId:11, towerName:\"Paladin\", \t\t upgrade:false, str:17, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar swordmasterStats = \t {towerId:12, towerName:\"Swordmaster\", \t upgrade:false, str:14, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"fast\", \t  hitfly:false};\nvar cutpurseStats = \t {towerId:13, towerName:\"Cutpurse\", \t upgrade:false, str:6,  atkRange:\"veryshort\", atkType:\"physical\", atkRate:\"veryfast\", hitfly:false};\nvar cannoneerStats = \t {towerId:14, towerName:\"Cannoneer\", \t upgrade:false, str:30, atkRange:\"long\", \t  atkType:\"physical\", atkRate:\"veryslow\", hitfly:false};\nvar sharpshooterStats =  {towerId:15, towerName:\"Sharpshooter\",  upgrade:false, str:35, atkRange:\"verylong\",  atkType:\"physical\", atkRate:\"slow\", \t  hitfly:true};\nvar beastmasterStats =   {towerId:16, towerName:\"Beastmaster\", \t upgrade:false, str:20, atkRange:\"long\",      atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar assassinStats = \t {towerId:17, towerName:\"Assassin\", \t upgrade:false, str:18, atkRange:\"long\",      atkType:\"physical\", atkRate:\"fast\", \t  hitfly:true};\nvar firemageStats = \t {towerId:18, towerName:\"FireMage\", \t upgrade:false, str:20, atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"fast\", \t  hitfly:true};\nvar icemageStats = \t\t {towerId:19, towerName:\"IceMage\", \t\t upgrade:false, str:10, atkRange:\"long\",      atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar lightningmageStats = {towerId:20, towerName:\"LightningMage\", upgrade:false, str:22, atkRange:\"short\",     atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar warlockStats = \t\t {towerId:21, towerName:\"Warlock\", \t\t upgrade:false, str:15, atkRange:\"long\",      atkType:\"magical\",  atkRate:\"slow\", \t  hitfly:true};\nvar priestessStats =     {towerId:22, towerName:\"Priestess\", \t upgrade:false, str:13, atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\n\nvar towerArr = [peasantStats, \n\t\t\tsoldierStats, \n\t\t\tarcherStats, \n\t\t\tapprenticeStats, \n\t\t\tknightStats, \n\t\t\tduelistStats, \n\t\t\triflemanStats, \n\t\t\trangerStats,\n\t\t\twizardStats,\n\t\t\tsorceressStats,\n\t\t\tcommanderStats,\n\t\t\tpaladinStats,\n\t\t\tswordmasterStats,\n\t\t\tcutpurseStats,\n\t\t\tcannoneerStats,\n\t\t\tsharpshooterStats,\n\t\t\tbeastmasterStats,\n\t\t\tassassinStats,\n\t\t\tfiremageStats,\n\t\t\ticemageStats,\n\t\t\tlightningmageStats,\n\t\t\twarlockStats,\n\t\t\tpriestessStats];\n\n//map for tower placement, 0=can place, -1=cannot place, towerObj=tower already occupying space\nvar map =  [[ 0,-1, 0,-1,-1,-1,-1,-1,-1,-1],\n            [ 0,-1, 0, 0, 0, 0, 0, 0, 0,-1],\n            [ 0,-1,-1,-1,-1,-1,-1,-1, 0,-1],\n            [ 0, 0, 0, 0, 0, 0, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1]];\n\t\t\t\n\n//------------------------------------------FUNCTIONS---------------------------------------------------\t\t\t\n//build the pathing and map for level\nfunction buildMap(){\n\t//path to which enemey follows\n    var graphics = THIS_SCENE.add.graphics();    \n    drawLines(graphics);\n    path = THIS_SCENE.add.path(96, -32);\n    path.lineTo(96, 164);\n    path.lineTo(480, 164);\n    path.lineTo(480, 544);\n    graphics.lineStyle(0, 0xffffff, 1);\n    path.draw(graphics);\n    \n\t//add map image\n\tTHIS_SCENE.add.image(320, 256, 'maps');\n\n\t//add background music\n\tvar background = THIS_SCENE.sound.add('background');\n\tbackground.volume = 0.04;\n\tbackground.loop = true;\n\t//background.play();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\n\tTHIS_SCENE.nextEnemy = 0;\n\tTHIS_SCENE.physics.add.overlap(ENEMY_GROUP, ATTACKS_GROUP, damageEnemy);\n    THIS_SCENE.input.mouse.disableContextMenu();\n}\n\n//user input related actions \nfunction userAction(pointer){\n\tvar i = Math.floor(pointer.y/64);\n\tvar j = Math.floor(pointer.x/64);\n\tif (pointer.leftButtonDown())\n        {\n\t\t\t//if new tower\n\t\t\tif(map[i][j] == 0)\n\t\t\t{\n\t\t\t\tvar newTower = TOWER_GROUP[peasantStats.towerId].get(peasantStats);\n\t\t\t\tnewTower.placeTower(pointer);\n\t\t\t}\n\t\t\t//if upgrade tower\n\t\t\telse if(typeof map[i][j] === \"object\")\n\t\t\t{\n\t\t\t\tvar currTower = map[i][j];\n\t\t\t\tvar newTower = TOWER_GROUP[soldierStats.towerId].get(soldierStats);\n\t\t\t\tcurrTower.upgradeTower(pointer, newTower);\n\t\t\t}\n        }\n        else if (pointer.rightButtonDown())\n        {\n\t\t\tvar tower = map[i][j];\n\t\t\tif(typeof tower === \"object\")\n\t\t\t{\n\t\t\t\ttower.removeTower(pointer);\n\t\t\t}\n\n        }\n}\n\nfunction getEnemy(x, y, distance) {\n    var enemyUnits = ENEMY_GROUP.getChildren();\n    for(var i = 0; i < enemyUnits.length; i++) {       \n        if(enemyUnits[i].active && Phaser.Math.Distance.Between(x, y, enemyUnits[i].x, enemyUnits[i].y) < distance)\n            return enemyUnits[i];\n    }\n    return false;\n} \n\nfunction damageEnemy(enemy, attack) {  \n    // only if both enemy and attack are alive\n    if (enemy.active === true && attack.active === true) {\n        // we remove the attack right away\n        attack.setActive(false);\n        attack.setVisible(false);    \n        \n        // decrease the enemy hp with ATTACK_DAMAGE\n        enemy.receiveDamage(ATTACK_DAMAGE);\n        //damage.play();\n    }\n}\n\nfunction drawLines(graphics) {\n    graphics.lineStyle(1, 0x0000ff, 0.8);\n    for(var i = 0; i < 8; i++) {\n        graphics.moveTo(0, i * 64);\n        graphics.lineTo(640, i * 64);\n    }\n    for(var j = 0; j < 10; j++) {\n        graphics.moveTo(j * 64, 0);\n        graphics.lineTo(j * 64, 512);\n    }\n    graphics.strokePath();\n}\t\n\nfunction addAttack(x, y, angle) {\n    var attack = ATTACKS_GROUP.get();\n    if (attack)\n    {\n        attack.fire(x, y, angle);\n    }\n}\n//---------------------------------------------------------CLASSES--------------------------------------------\n//enemy class\nclass Enemy extends Phaser.GameObjects.Sprite {\n\n    constructor (scene)\n    {\n        super(scene);\n        //dknight.animations.add('walk_down', 1, 4);\n        //this.anims.create({ key: 'down', frames: this.anims.generateFrameNames('deathknight', { prefix: 'walk_down_', start: 1, end: 4 }), frameRate: 5, repeat: -1 })\n\t\t//var enemy = Phaser.GameObjects.Sprite.call(this, scene, 0, 0, 'deathknight');\n\n        this.follower = { t: 0, vec: new Phaser.Math.Vector2() };\n        this.hp = 0;\n        this.turned = 0;\n\t\t\n\t\t//this.text = THIS_SCENE.add.text(0, 0, \"HP: \"+ ENEMY_HP, {font: \"16px Arial\", fill: \"#ffffff\"});\n\t\t//this.text.setPadding(0, 0, 0, 60);\n\t\t//this.text.setOrigin(0.5);\n\t\tthis.healthbar = new HealthBar(scene, 0, 0);\n\t\t\n    }\n\n\tstartOnPath ()\n\t{\n\t\tthis.follower.t = 0;\n\t\tthis.hp = ENEMY_HP;\n\t\t\n\t\t//this.walk.play();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\t\n\t\tpath.getPoint(this.follower.t, this.follower.vec);\n\t\t\n\t\tthis.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\t\n\t\t//this.text.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\tthis.healthbar.setPosition(this.follower.vec.x - this.width, this.follower.vec.y - this.height);\n\t }\n\t\n\treceiveDamage(damage) {\n\t\tthis.hp -= damage;           \n\t\t//this.text.setText(\"HP: \" + this.hp);\n\t\tthis.healthbar.decrease(damage);\n\t\tthis.damage.play();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\t\n\t\t// if hp drops below 0 we deactivate this enemy\n\t\tif (this.hp <= 0) {\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\t//this.text.setActive(false);\n\t\t\t//this.text.setVisible(false);\n\t\t\tthis.healthbar.destroy();\n\t\t\t\n\t\t\t//Need to set this to stop when all enemies are dead\n\t\t\tthis.death.play();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\t\t//this.walk.stop();\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\t\tthis.destroy();\n\t\t}\n\t}\n\t\n\tupdate (time, delta)\n\t{\n\t\t//ENEMY_SPEED = 1/Math.floor((Math.random() * (10000 - 5000)) + 5000);\n\t\tthis.follower.t += ENEMY_SPEED * delta;\n\t\t\n\t\tpath.getPoint(this.follower.t, this.follower.vec);\n\t\t\n\t\tthis.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\t//this.text.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\tthis.healthbar.setPosition(this.follower.vec.x - this.width, this.follower.vec.y - this.height);\n\t\t\n\t\tif (this.follower.vec.y == 164 && this.turned == 0) {\n\t\t\tthis.anims.play('dkright');\n\t\t\tthis.turned = 1;\n\t\t}\n\t\telse if (this.follower.vec.y != 164 && this.turned == 1)\n\t\t{\n\t\t\tthis.anims.play('dkdown');\n\t\t\tthis.turned = 2;\n\t\t}\n\n\t\tif (this.follower.t >= 1)\n\t\t{\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\t//this.text.setActive(false);\n\t\t\t//this.text.setVisible(false);\n\t\t\tthis.healthbar.destroy();\n\t\t\t//this.walk.stop();\t\t\t\t\t\t\t\t\t\t\t\t//sounds\n\t\t\tthis.destroy();\n\t\t}\n\t}\n};\n\nclass Deathknight extends Enemy {\n\tconstructor(scene) {\n\t\tsuper(scene);\n\t\tPhaser.GameObjects.Sprite.call(this, scene, 0, 0, 'deathknight');\n\t\t\n\t\t//create animations\n\t\tTHIS_SCENE.anims.create({\n\t\t\tkey: 'dkdown',\n\t\t\tframes: THIS_SCENE.anims.generateFrameNames('deathknight', { prefix: 'walk_down_', start: 1, end: 4 }),\n\t\t\tframeRate: 3,\n\t\t\trepeat: -1\n\t\t});\n\t\tTHIS_SCENE.anims.create({\n\t\t\tkey: 'dkright',\n\t\t\tframes: THIS_SCENE.anims.generateFrameNames('deathknight', { prefix: 'walk_right_', start: 1, end: 4 }),\n\t\t\tframeRate: 5,\n\t\t\trepeat: -1\n\t\t});\n        this.anims.play('dkdown');\n\t\t\n\t\t//create sounds\n\t\tthis.death = THIS_SCENE.sound.add('dkDeath');\n\t\tthis.death.volume = 0.05;\n\t\tthis.death.loop = false;\n\t\t\n\t\tthis.damage = THIS_SCENE.sound.add('hit');\n\t\tthis.damage.volume = 0.03;\n\t\tthis.damage.loop = false;\n\t\t\n\t\t/* this.walk = THIS_SCENE.sound.add('walk');\n\t\tthis.walk.volume = 0.01;\n\t\tthis.walk.loop = true; */\n\t}\n\tpFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\n//tower class\nclass Tower extends Phaser.GameObjects.Sprite{\n\n\tconstructor (scene, stats)\n\t{\n\t\tsuper(scene);\n\n\t\tthis.nextTic = 0;\n\t\tthis.towerId =  stats.towerId; //each tower has unique id\n\t\tthis.towerName = stats.towerName;\n\t\tthis.upgrade = stats.upgrade; //true = can upgrade, false = can't upgrade\n\t\tthis.str = stats.str; //value tha determines attack strength\n\t\tthis.atkRange = stats.atkRange;\n\t\tthis.atkType = stats.atkType;\n\t\tthis.atkRate = stats.atkRate; \n\t\tthis.hitFly = stats.hitFly; //true = can hit flying enemeies, false = cannot hit flying enemies\n\t\t//this.aoeRange = aoeRange; //area of effect range\n\t\t//this.spc = spc; //has special attack, each value represents special type, 0 = none, 1 = chance to stun, etc.\n\t\t\n\t\tthis.text = THIS_SCENE.add.text(0, 0, this.towerName, {font: \"16px Arial\", fill: \"#ffffff\"});\n\t\t\n\t\tthis.upgradeSound = THIS_SCENE.sound.add('upgradeSound');\n\t\tthis.upgradeSound.volume = 0.05;\n\t\tthis.upgradeSound.loop = false;\n\t\t\n\t}\n\t\n\tplaceTower(pointer) {\n\t\tvar i = Math.floor(pointer.y/64);\n\t\tvar j = Math.floor(pointer.x/64);\n\t\tif(map[i][j] === 0) {\n\t\t\t//console.log(tower);\n\t\t\tif (this)\n\t\t\t{\n\t\t\t\tthis.text.y = (i+.50) * 64 + 64/2;\n\t\t\t\tthis.text.x = j * 64 + 64/2;\n\t\t\t\tthis.text.setOrigin(0.5);\n\t\t\t\t//THIS_SCENE.add.container([this.text, this]);\n\t\t\t\tthis.setActive(true);\n\t\t\t\tthis.setVisible(true);\n\t\t\t\tthis.y = i * 64 + 64/2;\n\t\t\t\tthis.x = j * 64 + 64/2;\n\t\t\t\t//map[i][j] = 1;\n\t\t\t\tmap[i][j] = this;\n\t\t\t}   \n\t\t\t//console.log(TOWER_GROUP.getTotalUsed());\n\t\t\t//console.log(TOWER_GROUP.getLength());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tTOWER_GROUP[this.towerId].remove(this, true, true);\t\t//tower is created before it's placed so removed if the place clicked on is  not avaialble\n\t\t}\n\t}\n\n\tremoveTower(pointer) {\n\t\tvar i = Math.floor(pointer.y/64);\n\t\tvar j = Math.floor(pointer.x/64);\n\t\tif(map[i][j] !== 0) {\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\tthis.text.destroy();\n\t\t\tmap[i][j] = 0;\t\t\t\t\t\t\t\t\t\t\t\t//remove from map\n\t\t\tTOWER_GROUP[this.towerId].remove(this, true, true);\t\t\t//removes from group, if want to keep it as inactive then remove this line\n\t\t}\n\t\t\t\n\t}\n\t\n\tupgradeTower(pointer, newTower) {\n\t\t//check if tower is already upgraded, if not the upgrade\n\t\tif(this.towerName !== newTower.towerName)\n\t\t{\n\t\t\tvar i = Math.floor(pointer.y/64);\n\t\t\tvar j = Math.floor(pointer.x/64);\n\t\t\tthis.removeTower(pointer);\n\t\t\tnewTower.placeTower(pointer);\n\t\t\t//console.log(TOWER_GROUP.getTotalUsed());\n\t\t\t//console.log(TOWER_GROUP.getLength());\n\t\t\tthis.text = newTower.towerName;\n\t\t\tthis.upgradeSound.play();\n\n            THIS_SCENE.tweens.add({\n                targets: newTower, // on the player \n                duration: 200, // for 200ms \n                scaleX: 1.2, // that scale vertically by 20% \n                scaleY: 1.2, // and scale horizontally by 20% \n                alpha: 0.2,\n                yoyo: true, // at the end, go back to original scale \n            });\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\tTOWER_GROUP[newTower.towerId].remove(newTower, true, true);\t\t//tower is created before it's placed so removed if the place clicked on is  not avaialble\n\t\t\tnewTower.text.destroy();\n\t\t}\n\t\n\t}\n\t\n\tfire() {\n\t\tvar enemy = getEnemy(this.x, this.y, 200);\n\t\tif(enemy) {\n\t\t\tvar angle = Phaser.Math.Angle.Between(this.x, this.y, enemy.x, enemy.y);\n\t\t\taddAttack(this.x, this.y, angle);\n\t\t\t//this.angle = (angle + Math.PI/2) * Phaser.Math.RAD_TO_DEG;    //uncomment to make towers rotate to face enemy\n\t\t}\n\t}\n\t\n\tupdate(time, delta, pointer)\n\t{\n\t\tif(time > this.nextTic) {\n\t\t\tthis.fire();\n\t\t\tthis.nextTic = time + TOWER_FIRE_RATE;\n\t\t}\n\t}\n\tsayName()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n};\n\nclass Peasant extends Tower {\n\tconstructor(scene, stats) {\n\t\t// Note: In derived classes, super() must be called before you\n\t\t// can use 'this'. Leaving this out will cause a reference error.\n\t\tsuper(scene, stats);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'peasant', 'sprite35');\n\t}\n\tpFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\nclass Soldier extends Tower {\n\tconstructor(scene, stats) {\n\t\tsuper(scene, stats);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'soldier', 'sprite25');\n\n\t}\n\tsFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\n//all other classes\n//HP class\nclass HealthBar {\n\n    constructor(scene, x, y) {\n        this.bar = new Phaser.GameObjects.Graphics(scene);\n\n        this.x = x;\n        this.y = y;\n        this.value = ENEMY_HP;\n        this.p = .076;\n\n        this.draw();\n\n        THIS_SCENE.add.existing(this.bar);\n    }\n\n    setPosition(x, y) {\n        this.x = x;\n        this.y = y;\n        this.draw();\n    }\n\n    decrease(amount) {\n        this.value -= amount;\n\n        if (this.value < 0) {\n            this.value = 0;\n        }\n\n        this.draw();\n\n        return (this.value === 0);\n    }\n\n    draw() {\n        this.bar.clear();\n\n        //  BG\n        this.bar.fillStyle(0x000000);\n        this.bar.fillRect(this.x, this.y, 80, 16);\n\n        //  Health\n\n        this.bar.fillStyle(0xffffff);\n        this.bar.fillRect(this.x + 2, this.y + 2, 76, 12);\n\n        if (this.value < 0.6 * ENEMY_HP) {\n            this.bar.fillStyle(0xff0000);\n        }\n        else if (this.value < 0.3 * ENEMY_HP)\n            this.bar.fillStyle(0x00ffff);\n        else {\n            this.bar.fillStyle(0x00ff00);\n        }\n\n        var d = Math.floor(this.p * this.value);\n\n        this.bar.fillRect(this.x + 2, this.y + 2, d, 12);\n    }\n\n    destroy() {\n        this.bar.destroy();\n    }\n\n}\n\n//the yellow thing the towers shoots at enemy, can be any form of projectile\nclass Attack extends Phaser.GameObjects.Image {\n\tconstructor(scene)\n\t{\n\t\tsuper(scene);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'attack');\n\n\t\tthis.incX = 0;\n\t\tthis.incY = 0;\n\t\tthis.lifespan = 0;\n\n\t\tthis.speed = Phaser.Math.GetSpeed(600, 1);\n\n    \tthis.particles = THIS_SCENE.add.particles('attack');\n\n        this.emitter = this.particles.createEmitter({\n            speed: 75,\n            scale: { start: 0.2, end: 0 },\n            quantity: 1,\n            blendMode: 'SCREEN'\n        });\n\n\t    this.emitter.startFollow(this);\n        \n\t}\n\n\tfire(x, y, angle)\n\t{\n\t\tthis.setActive(true);\n\t\tthis.setVisible(true);\n\t\t//  Attacks fire from the middle of the screen to the given x/y\n\t\tthis.setPosition(x, y);\n\t\t\n\t//  we don't need to rotate the attacks as they are round\n\t//    this.setRotation(angle);\n\n\t\tthis.dx = Math.cos(angle);\n\t\tthis.dy = Math.sin(angle);\n\n\t\tthis.lifespan = 1000;\n\t}\n\n\tupdate (time, delta)\n\t{\n\t\tthis.lifespan -= delta;\n\t\tthis.x += this.dx * (this.speed * delta);\n\t\tthis.y += this.dy * (this.speed * delta);\n        this.emitter.explode(5,this.x,this.y);\n\n\t\tif (this.lifespan <= 0)\n\t\t{\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n            \n\t\t}\n\t}\n\n};\n\n\nexport class GameScene extends Phaser.Scene {\n    constructor(){\n        super({\n            key: CST.SCENES.GAME\n        })\n    }\n\n    \n    //Preload function loads assets before game starts\n \n    init(data){\n        console.log(data);\n    }\n\n    //create function initializes and adds assets to game\n    create() {\n        //remove some ambiguity of what 'this' is. Can be used in classes without having to send as a parameter since it's now globabl\n\t\tTHIS_SCENE = this;\n\t\t\n\t\t/*creates a group for a tower type, that way we can use TOWER_GROUP.get(towerStats) to instantiate new towers easily\n\t\tloop through towerArr to get each tower object\n\t\tthen add each object to TOWER_GROUP arr\n\t\twe do this becuase TOWER_GROUP can now be easily used to manipulate tower objects with Phaser functions.*/\n\t\t//loop set to 2 since we only have 2 developed classes at the moment\n\t\tfor(var i = 0; i < 2; i++) {\n\t\t    TOWER_GROUP[towerArr[i].towerId] = this.add.group({ classType: eval(towerArr[i].towerName), runChildUpdate: true });\n\t\t}\n\t\t\n\t\t//enemy group will be a loop similar to tower group\n\t\tENEMY_GROUP = this.physics.add.group({ classType: Deathknight, runChildUpdate: true }); //key: 'walk_down_', frame: [1, 2, 3, 4], repeat: 5, active: true });\n\t\t\n\t\t//turned into attack group soon for different attack types\n\t\tATTACKS_GROUP = this.physics.add.group({ classType: Attack, runChildUpdate: true });\n\t\t\n\t\t//build the game map, this includes pathing, map image, background sounds, and general game assets\n\t\tbuildMap();\n\t\t\n\t\t//input related actions in userAction function\n\t\tthis.input.on('pointerdown', function (pointer){userAction(pointer)});\n\n        /*let nextScene = this.add.text(this.game.renderer.width / 2, this.game.renderer.height / 2, 'nextScene').setDepth(1);\n        nextScene.setInteractive();\n        nextScene.on(\"pointerdown\", ()=>{\n            this.scene.start(CST.SCENES.GAME2, \"Armory Level\");\n        })*/\n\n    }\n\n    //update function constantly refreshes so to progress game\n    update(time, delta, path) {  \n\n        if (time > this.nextEnemy)\n        {\n            var enemy = ENEMY_GROUP.get(path);\n            if (enemy)\n            {\n                enemy.setActive(true);\n                enemy.setVisible(true);\n                enemy.startOnPath();\n                //ENEMY_SPEED = 1/Math.floor((Math.random() * (2000 - 500)) + 500);\n                this.nextEnemy = time + ENEMY_SPAWN_RATE;\n            }       \n        }\n\t\n    }\n}\n","import { CST} from \"../CST\";\n\nexport class LoadScene extends Phaser.Scene{\n    constructor(){\n        super({\n            key: CST.SCENES.LOAD\n        })\n    }\n\n    preload(){\n        this.add.text(230, 230, 'Loading', { font: '50px Arial', fill: '#fff' });\n        this.load.atlas('deathknight', './dist/assets/deathknight.png', './dist/assets/deathknight.json');\n        this.load.atlas('soldier', './dist/assets/soldier.png', './dist/assets/soldier.json');\n        this.load.atlas('peasant', './dist/assets/peasant.png', './dist/assets/peasant.json');\n\n        this.load.image('attack', './dist/assets/coin.png');\n        this.load.image('maps', './dist/assets/castle-gates.png', { frameWidth: 640, frameHeight: 512 });\n\n        this.load.audio('dkDeath', './dist/assets/Sounds/Death Screams/Human/sfx_deathscream_human5.wav');\n        this.load.audio('hit', './dist/assets/Sounds/General Sounds/Simple Damage Sounds/sfx_damage_hit2.wav');\n        this.load.audio('walk', './dist/assets/Sounds/Movement/Footsteps/sfx_movement_footstepsloop4_slow.wav');\n        this.load.audio('background', './dist/assets/Sounds/random silly chip song.ogg');\n\t\tthis.load.audio('upgradeSound', './dist/assets/Sounds/General Sounds/Positive Sounds/sfx_sounds_powerup6.wav');\n        this.load.image('menuscreen', './dist/assets/bg.png', { frameWidth: 640, frameHeight: 512 });\n        this.load.image('newgame', './dist/assets/new.png');\n    }\n    create(){\n        //Creating menu screen background layers\n        this.scene.start(CST.SCENES.MENU, \"Loading complete\");\n        }\n}","import {MenuScene} from \"./scenes/MenuScene\";\nimport {GameScene} from \"./scenes/GameScene\";\nimport {LoadScene} from \"./scenes/LoadScene\";\n\n//-------------------------------------------------------SETUP-----------------------------------------------------\n//master config for game\n\nvar config = {\n    type: Phaser.AUTO,\n    parent: 'content',\n    width: 640,\n    height: 512,\n    physics: {\n        default: 'arcade'\n    },\n    render:{\n        pixelArt: true\n    },\n    scene: [\n        LoadScene,\n        MenuScene,\n        GameScene]\n    \n};\n\n//begin game\nvar game = new Phaser.Game(config);\n\n//--------------------------------------------------GLOBAL VARIABLES-------------------------------------------\nvar path;\nvar TOWER_GROUP = [];\nvar ENEMY_GROUP;\nvar mainGame;\n\nvar ENEMY_SPEED = 1/10000;\n//var ENEMY_SPEED = 1/Math.floor((Math.random() * 10000) + 10000);\nvar ENEMY_HP = 1000;\nvar ENEMY_SPAWN_RATE = 2000;\n//var ENEMY_SPAWN_RATE = Math.floor((Math.random() * 1000) + 1000);\nvar ATTACK_DAMAGE = 50;\nvar TOWER_FIRE_RATE = 300;\n\n//stats for each tower type loaded from file rather than defined here, but for now do this\nvar peasantStats = \t\t {towerId:0,  towerName:\"Peasant\", \t\t upgrade:true,  str:50,  atkRange:150,     atkType:\"physical\", atkRate:500, \t  hitfly:false};\nvar soldierStats = \t\t {towerId:1,  towerName:\"Soldier\", \t\t upgrade:true,  str:100, atkRange:200,     atkType:\"physical\", atkRate:400,   hitfly:false};\nvar archerStats = \t\t {towerId:2,  towerName:\"Archer\", \t\t upgrade:true,  str:120, atkRange:250,    atkType:\"physical\", atkRate:350, \t  hitfly:true};\nvar apprenticeStats = \t {towerId:3,  towerName:\"Apprentice\", \t upgrade:true,  str:7,  atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"medium\",   hitfly:false};\nvar knightStats = \t\t {towerId:4,  towerName:\"Knight\", \t\t upgrade:true,  str:15, atkRange:\"short\",     atkType:\"physical\", atkRate:\"medium\",   hitfly:false};\nvar duelistStats = \t\t {towerId:5,  towerName:\"Duelist\", \t\t upgrade:true,  str:12, atkRange:\"short\",     atkType:\"physical\", atkRate:\"fast\", \t  hitfly:false};\nvar riflemanStats =\t \t {towerId:6,  towerName:\"Rifleman\", \t upgrade:true,  str:20, atkRange:\"medium\",    atkType:\"physical\", atkRate:\"slow\", \t  hitfly:true};\nvar rangerStats = \t\t {towerId:7,  towerName:\"Ranger\", \t\t upgrade:true,  str:14, atkRange:\"medium\",    atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar wizardStats = \t\t {towerId:8,  towerName:\"Wizard\", \t\t upgrade:true,  str:10, atkRange:\"medium\", \t  atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar sorceressStats = \t {towerId:9,  towerName:\"Sorceress\", \t upgrade:true,  str:13, atkRange:\"medium\", \t  atkType:\"magical\",  atkRate:\"slow\", \t  hitfly:true};\nvar commanderStats = \t {towerId:10, towerName:\"Commander\", \t upgrade:false, str:25, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"slow\", \t  hitfly:false};\nvar paladinStats = \t\t {towerId:11, towerName:\"Paladin\", \t\t upgrade:false, str:17, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar swordmasterStats = \t {towerId:12, towerName:\"Swordmaster\", \t upgrade:false, str:14, atkRange:\"short\", \t  atkType:\"physical\", atkRate:\"fast\", \t  hitfly:false};\nvar cutpurseStats = \t {towerId:13, towerName:\"Cutpurse\", \t upgrade:false, str:6,  atkRange:\"veryshort\", atkType:\"physical\", atkRate:\"veryfast\", hitfly:false};\nvar cannoneerStats = \t {towerId:14, towerName:\"Cannoneer\", \t upgrade:false, str:30, atkRange:\"long\", \t  atkType:\"physical\", atkRate:\"veryslow\", hitfly:false};\nvar sharpshooterStats =  {towerId:15, towerName:\"Sharpshooter\",  upgrade:false, str:35, atkRange:\"verylong\",  atkType:\"physical\", atkRate:\"slow\", \t  hitfly:true};\nvar beastmasterStats =   {towerId:16, towerName:\"Beastmaster\", \t upgrade:false, str:20, atkRange:\"long\",      atkType:\"physical\", atkRate:\"medium\",   hitfly:true};\nvar assassinStats = \t {towerId:17, towerName:\"Assassin\", \t upgrade:false, str:18, atkRange:\"long\",      atkType:\"physical\", atkRate:\"fast\", \t  hitfly:true};\nvar firemageStats = \t {towerId:18, towerName:\"FireMage\", \t upgrade:false, str:20, atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"fast\", \t  hitfly:true};\nvar icemageStats = \t\t {towerId:19, towerName:\"IceMage\", \t\t upgrade:false, str:10, atkRange:\"long\",      atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar lightningmageStats = {towerId:20, towerName:\"LightningMage\", upgrade:false, str:22, atkRange:\"short\",     atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\nvar warlockStats = \t\t {towerId:21, towerName:\"Warlock\", \t\t upgrade:false, str:15, atkRange:\"long\",      atkType:\"magical\",  atkRate:\"slow\", \t  hitfly:true};\nvar priestessStats =     {towerId:22, towerName:\"Priestess\", \t upgrade:false, str:13, atkRange:\"medium\",    atkType:\"magical\",  atkRate:\"medium\",   hitfly:true};\n\n//map for tower placement, 0=can place, -1=cannot place, 1=can place with turrent already occupying space\nvar map =  [[ 0,-1, 0,-1,-1,-1,-1,-1,-1,-1],\n            [ 0,-1, 0, 0, 0, 0, 0, 0, 0,-1],\n            [ 0,-1,-1,-1,-1,-1,-1,-1, 0,-1],\n            [ 0, 0, 0, 0, 0, 0, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1],\n            [-1,-1,-1,-1,-1,-1, 0,-1, 0,-1]];\n\t\t\t\n\n//------------------------------------------FUNCTIONS---------------------------------------------------\t\t\t\nfunction getEnemy(x, y, distance) {\n    var enemyUnits = ENEMY_GROUP.getChildren();\n    for(var i = 0; i < enemyUnits.length; i++) {       \n        if(enemyUnits[i].active && Phaser.Math.Distance.Between(x, y, enemyUnits[i].x, enemyUnits[i].y) < distance)\n            return enemyUnits[i];\n    }\n    return false;\n} \n\nfunction damageEnemy(enemy, attack) {  \n    // only if both enemy and attack are alive\n    if (enemy.active === true && attack.active === true) {\n        // we remove the attack right away\n        attack.setActive(false);\n        attack.setVisible(false);    \n        \n        // decrease the enemy hp with ATTACK_DAMAGE\n        enemy.receiveDamage(attack.damage);\n        //damage.play();\n    }\n}\n\nfunction drawLines(graphics) {\n    graphics.lineStyle(1, 0x0000ff, 0.8);\n    for(var i = 0; i < 8; i++) {\n        graphics.moveTo(0, i * 64);\n        graphics.lineTo(640, i * 64);\n    }\n    for(var j = 0; j < 10; j++) {\n        graphics.moveTo(j * 64, 0);\n        graphics.lineTo(j * 64, 512);\n    }\n    graphics.strokePath();\n}\t\n\nfunction addAttack(x, y, angle, damage) {\n    var attack = ATTACK_GROUP.get();\n    if (attack)\n    {\n        attack.fire(x, y, angle, damage);\n    }\n}\n\n//---------------------------------------------------------CLASSES--------------------------------------------\nclass HealthBar {\n\n    constructor(scene, x, y) {\n        this.bar = new Phaser.GameObjects.Graphics(scene);\n\n        this.x = x;\n        this.y = y;\n        this.value = ENEMY_HP;\n        this.p = .076;\n\n        this.draw();\n\n        mainGame.add.existing(this.bar);\n    }\n\n    setPosition(x, y) {\n        this.x = x;\n        this.y = y;\n        this.draw();\n    }\n\n    decrease(amount) {\n        this.value -= amount;\n\n        if (this.value < 0) {\n            this.value = 0;\n        }\n\n        this.draw();\n\n        return (this.value === 0);\n    }\n\n    draw() {\n        this.bar.clear();\n\n        //  BG\n        this.bar.fillStyle(0x000000);\n        this.bar.fillRect(this.x, this.y, 80, 16);\n\n        //  Health\n\n        this.bar.fillStyle(0xffffff);\n        this.bar.fillRect(this.x + 2, this.y + 2, 76, 12);\n\n        if (this.value < 0.6 * ENEMY_HP) {\n            this.bar.fillStyle(0xff0000);\n        }\n        else if (this.value < 0.3 * ENEMY_HP)\n            this.bar.fillStyle(0x00ffff);\n        else {\n            this.bar.fillStyle(0x00ff00);\n        }\n\n        var d = Math.floor(this.p * this.value);\n\n        this.bar.fillRect(this.x + 2, this.y + 2, d, 12);\n    }\n\n    destroy() {\n        this.bar.destroy();\n    }\n\n}\n\n\nclass Enemy extends Phaser.GameObjects.Sprite {\n\n    constructor (scene)\n    {\n        super(scene);\n        //dknight.animations.add('walk_down', 1, 4);\n        //this.anims.create({ key: 'down', frames: this.anims.generateFrameNames('deathknight', { prefix: 'walk_down_', start: 1, end: 4 }), frameRate: 5, repeat: -1 })\n        \n\t\tvar enemy = Phaser.GameObjects.Sprite.call(this, scene, 0, 0, 'deathknight');\n\t\t\n\t\t\n        \n        this.anims.play('dkdown');\n        //walk.play();\n        this.follower = { t: 0, vec: new Phaser.Math.Vector2() };\n        this.hp = 0;\n        this.turned = 0;\n\t\t\n\t\tthis.text = mainGame.add.text(0, 0, \"HP: \"+ ENEMY_HP, {font: \"16px Arial\", fill: \"#ffffff\"});\n\t\tthis.text.setPadding(0, 0, 0, 60);\n\t\tthis.text.setOrigin(0.5);\n\t\tthis.healthbar = new HealthBar(scene, 0, 0);\n\t\t\n    }\n\n\tstartOnPath ()\n\t{\n\t\tthis.follower.t = 0;\n\t\tthis.hp = ENEMY_HP;\n\t\t\n\t\tpath.getPoint(this.follower.t, this.follower.vec);\n\t\t\n\t\tthis.setPosition(this.follower.vec.x, this.follower.vec.y);     \n\t\tthis.text.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\tthis.healthbar.setPosition(this.follower.vec.x - this.width, this.follower.vec.y - this.height);\n\t }\n\t\n\treceiveDamage(damage) {\n\t\tthis.hp -= damage;           \n\t\tthis.text.setText(\"HP: \" + this.hp);\n\t\tthis.healthbar.decrease(damage);\n\t\t// if hp drops below 0 we deactivate this enemy\n\t\tif (this.hp <= 0) {\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\tthis.text.setActive(false);\n\t\t\tthis.text.setVisible(false);\n\t\t\tthis.healthbar.destroy();\n\t\t\t//dkdeath.play();\n\t\t\t//Need to set this to stop when all enemies are dead\n\t\t\t//walk.stop();\n\t\t\tthis.destroy();\n\t\t}\n\t}\n\t\n\tupdate (time, delta)\n\t{\n\t\t//ENEMY_SPEED = 1/Math.floor((Math.random() * (10000 - 5000)) + 5000);\n\t\tthis.follower.t += ENEMY_SPEED * delta;\n\t\t\n\t\tpath.getPoint(this.follower.t, this.follower.vec);\n\t\t\n\t\tthis.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\tthis.text.setPosition(this.follower.vec.x, this.follower.vec.y);\n\t\tthis.healthbar.setPosition(this.follower.vec.x - this.width, this.follower.vec.y - this.height);\n\t\tif (this.follower.vec.y == 164 && this.turned == 0) {\n\t\t\tthis.anims.play('dkright');\n\t\t\tthis.turned = 1;\n\t\t}\n\t\telse if (this.follower.vec.y != 164 && this.turned == 1)\n\t\t{\n\t\t\tthis.anims.play('dkdown');\n\t\t\tthis.turned = 2;\n\t\t}\n\n\t\tif (this.follower.t >= 1)\n\t\t{\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\tthis.text.setActive(false);\n\t\t\tthis.text.setVisible(false);\n\t\t\tthis.healthbar.destroy();\n\t\t\tthis.destroy();\n\t\t}\n\t}\n};\n\n//towers class\nclass Tower extends Phaser.GameObjects.Image {\n\n\tconstructor (scene, stats)\n\t{\n\t\tsuper(scene);\n\t\tthis.nextTic = 0;\n\t\tthis.towerId =  stats.towerId; //each tower has unique id\n\t\tthis.towerName = stats.towerName;\n\t\tthis.upgrade = stats.upgrade; //true = can upgrade, false = can't upgrade\n\t\tthis.str = stats.str; //value that determines attack strength\n\t\tthis.atkRange = stats.atkRange;\n\t\tthis.atkType = stats.atkType;\n\t\tthis.atkRate = stats.atkRate; \n\t\tthis.hitFly = stats.hitFly; //true = can hit flying enemeies, false = cannot hit flying enemies\n\t\t//this.aoeRange = aoeRange; //area of effect range\n\t\t//this.spc = spc; //has special attack, each value represents special type, 0 = none, 1 = chance to stun, etc.\n\t\tthis.text = mainGame.add.text(0, 0, this.towerName, {font: \"16px Arial\", fill: \"#ffffff\"});\n\t}\n\t\n\tplaceTower(pointer) {\n\t\tvar i = Math.floor(pointer.y/64);\n\t\tvar j = Math.floor(pointer.x/64);\n\t\tif(map[i][j] === 0) {\n\t\t\t//console.log(tower);\n\t\t\tif (this)\n\t\t\t{\n\t\t\t\tthis.text.y = (i+.50) * 64 + 64/2;\n\t\t\t\tthis.text.x = j * 64 + 64/2;\n\t\t\t\tthis.text.setOrigin(0.5);\n\t\t\t\t//mainGame.add.container([this.text, this]);\n\t\t\t\tthis.setActive(true);\n\t\t\t\tthis.setVisible(true);\n\t\t\t\tthis.y = i * 64 + 64/2;\n\t\t\t\tthis.x = j * 64 + 64/2;\n\t\t\t\t//map[i][j] = 1;\n\t\t\t\tmap[i][j] = this;\n\t\t\t}   \n\t\t\t//console.log(TOWER_GROUP.getTotalUsed());\n\t\t\t//console.log(TOWER_GROUP.getLength());\n\t\t}\n\t\telse\n\t\t\tTOWER_GROUP[this.towerId].remove(this, true, true);\t\t//tower is created before it's placed so removed if the place clicked on is  not avaialble\n\t}\n\n\tremoveTower(pointer) {\n\t\tvar i = Math.floor(pointer.y/64);\n\t\tvar j = Math.floor(pointer.x/64);\n\t\tif(map[i][j] !== 0) {\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t\tthis.text.setActive(false);\n\t\t\tthis.text.setVisible(false);\n\t\t\tmap[i][j] = 0;\t\t\t\t\t\t\t\t//remove from map\n\t\t\tTOWER_GROUP[this.towerId].remove(this, true, true);\t\t\t//removes from group, if want to keep it as inactive then remove this line\n\t\t}\n\t\t\t\n\t}\n\t\n\tupgradeTower(pointer, newTower) {\n\t\tvar i = Math.floor(pointer.y/64);\n\t\tvar j = Math.floor(pointer.x/64);\n\t\tthis.removeTower(pointer);\n\t\tnewTower.placeTower(pointer);\n\t\t//console.log(TOWER_GROUP.getTotalUsed());\n\t\t//console.log(TOWER_GROUP.getLength());\n\t\n\t}\n\t\n\tfire() {\n\t\tvar enemy = getEnemy(this.x, this.y, this.atkRange);\n\t\tif(enemy) {\n\t\t\tvar angle = Phaser.Math.Angle.Between(this.x, this.y, enemy.x, enemy.y);\n\t\t\taddAttack(this.x, this.y, angle, this.str);\n\t\t\t//this.angle = (angle + Math.PI/2) * Phaser.Math.RAD_TO_DEG;    //uncomment to make towers rotate to face enemy\n\t\t}\n\t}\n\t\n\tupdate(time, delta, pointer)\n\t{\n\t\tif(time > this.nextTic) {\n\t\t\tthis.fire();\n\t\t\tthis.nextTic = time + this.atkRate;\n\t\t}\n\t}\n\t\n\tsayName()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n};\n\nclass Peasant extends Tower {\n\tconstructor(scene, stats) {\n\t\t// Note: In derived classes, super() must be called before you\n\t\t// can use 'this'. Leaving this out will cause a reference error.\n\t\tsuper(scene, stats);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'peasant', 'sprite35');\n\t}\n\tpFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\nclass Soldier extends Tower {\n\tconstructor(scene, stats) {\n\t\tsuper(scene, stats);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'goldenarmor', 'sprite25');\n\t\t\n\t}\n\tsFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\nclass Archer extends Tower {\n\tconstructor(scene, stats) {\n\t\tsuper(scene, stats);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'archer', 'tile051');\n\t\t\n\t}\n\taFn()\n\t{\n\t\tconsole.log(this.towerName);\n\t}\n\n}\n\n//the yellow thing the towers shoots at enemy, can be any form of projectile\nclass Attack extends Phaser.GameObjects.Image {\n\tconstructor(scene)\n\t{\n\t\tsuper(scene);\n\t\tPhaser.GameObjects.Image.call(this, scene, 0, 0, 'attack');\n\n\t\tthis.incX = 0;\n\t\tthis.incY = 0;\n\t\tthis.lifespan = 0;\n\t\tthis.damage = 0;\n\n\t\tthis.speed = Phaser.Math.GetSpeed(600, 1);\n\t}\n\n\tfire(x, y, angle, damage)\n\t{\n\t\tthis.setActive(true);\n\t\tthis.setVisible(true);\n\t\t//  Attacks fire from the middle of the screen to the given x/y\n\t\tthis.setPosition(x, y);\n\t\t\n\t//  we don't need to rotate the attacks as they are round\n\t//    this.setRotation(angle);\n\n\t\tthis.dx = Math.cos(angle);\n\t\tthis.dy = Math.sin(angle);\n\n\t\tthis.lifespan = 1000;\n\t\tthis.damage = damage;\n\t}\n\n\tupdate (time, delta)\n\t{\n\t\tthis.lifespan -= delta;\n\n\t\tthis.x += this.dx * (this.speed * delta);\n\t\tthis.y += this.dy * (this.speed * delta);\n\n\t\tif (this.lifespan <= 0)\n\t\t{\n\t\t\tthis.setActive(false);\n\t\t\tthis.setVisible(false);\n\t\t}\n\t}\n\n};\n\n\n//----------------------------------------------------GAME-------------------------------------------\t\n\t\n//Preload function loads assets before game starts\nfunction preload() {    \n    this.load.atlas('deathknight', 'assets/deathknight.png', 'assets/deathknight.json');\n    this.load.atlas('goldenarmor', 'assets/goldenarmor.png', 'assets/goldenarmor.json');\n\tthis.load.atlas('archer', 'assets/archer.png', 'assets/archer.json');\n    this.load.atlas('peasant', 'assets/peasant.png', 'assets/peasant.json');\n\tthis.load.spritesheet('bard', 'assets/bard.png', { frameWidth: 52, frameHeight: 75});\n\tthis.load.image('attack', 'assets/coin.png');\n\tthis.load.image('map', 'assets/castle-gates.png', { frameWidth: 640, frameHeight: 512 });\n\tthis.load.audio('dkDeath', 'assets/Sounds/Death Screams/Human/sfx_deathscream_human5.wav');\n\tthis.load.audio('hit', 'assets/Sounds/General Sounds/Simple Damage Sounds/sfx_damage_hit2.wav');\n\tthis.load.audio('walk', 'assets/Sounds/Movement/Footsteps/sfx_movement_footstepsloop4_slow.wav');\n\tthis.load.audio('background', 'assets/Sounds/random silly chip song.ogg');\n\n}\n \n//create function initializes and adds assets to game\nfunction create() {\n\t//path to which enemey follows\n    var graphics = this.add.graphics();    \n    drawLines(graphics);\n    path = this.add.path(96, -32);\n    path.lineTo(96, 164);\n    path.lineTo(480, 164);\n    path.lineTo(480, 544);\n\t\n    graphics.lineStyle(0, 0xffffff, 1);\n    path.draw(graphics);\n    \n    this.add.image(320, 256, 'map');\n\n    mainGame = this;\n\n    mainGame.anims.create({\n        key: 'dkdown',\n        frames: mainGame.anims.generateFrameNames('deathknight', { prefix: 'walk_down_', start: 1, end: 4 }),\n        frameRate: 3,\n        repeat: -1\n    });\n    mainGame.anims.create({\n        key: 'dkright',\n        frames: mainGame.anims.generateFrameNames('deathknight', { prefix: 'walk_right_', start: 1, end: 4 }),\n        frameRate: 5,\n        repeat: -1\n    });\t\n\n/*     dkdeath = this.sound.add('dkDeath');\n    damage = this.sound.add('hit');\n    damage.volume = 0.3;\n    walk = this.sound.add('walk');\n    walk.volume = 0.3;\n    walk.loop = true;\n    background = this.sound.add('background');\n    background.volume = 0.2;\n    background.loop = true;\n    background.play(); */\n\t\n\t//creates a group for a tower type, that way we can use TOWER_GROUP.get(peasantStats) to instantiate new towers easily\n    //same goes for enemies and attacks and for any new classes created\n\tTOWER_GROUP[peasantStats.towerId] = this.add.group({ classType: Peasant, runChildUpdate: true });\n\tTOWER_GROUP[soldierStats.towerId] = this.add.group({ classType: Soldier, runChildUpdate: true });\n\tTOWER_GROUP[archerStats.towerId] = this.add.group({ classType: Archer, runChildUpdate: true });\n\t//TOWER_GROUP[apprenticeStats.towerId] = this.add.group({ classType: Apprentice, runChildUpdate: true });\n\n\t\n\tENEMY_GROUP = this.physics.add.group({ classType: Enemy, runChildUpdate: true }); //key: 'walk_down_', frame: [1, 2, 3, 4], repeat: 5, active: true });\n   \n\t\n    //ENEMY_GROUP.callAll('play', null, 'down',);\n\n    ATTACK_GROUP = this.physics.add.group({ classType: Attack, runChildUpdate: true });\n    \n    this.nextEnemy = 0;\n    \n    this.physics.add.overlap(ENEMY_GROUP, ATTACK_GROUP, damageEnemy);\n    \n\tthis.input.mouse.disableContextMenu();\n\t\n    this.input.on('pointerdown', function (pointer) {\n\t\tif (pointer.leftButtonDown())\n        {\n\t\t\tvar i = Math.floor(pointer.y/64);\n\t\t\tvar j = Math.floor(pointer.x/64);\n\t\t\tif(map[i][j] == 0)\n\t\t\t{\n\t\t\t\tvar tower = TOWER_GROUP[peasantStats.towerId].get(peasantStats);\n\t\t\t\ttower.placeTower(pointer);\n\t\t\t}\n\t\t\telse if(map[i][j].towerId == 0)\n\t\t\t{\n\t\t\t\tvar tower = map[i][j];\n\t\t\t\t//var newTG = mainGame.add.group({ classType: Soldier, runChildUpdate: true });\n\t\t\t\tvar newTower = TOWER_GROUP[soldierStats.towerId].get(soldierStats);\n\t\t\t\ttower.upgradeTower(pointer, newTower);\n\t\t\t\ttower.setText = newTower.towerName;\n\t\t\t}\n\t\t\telse if(map[i][j].towerId == 1)\n\t\t\t{\n\t\t\t\tvar tower = map[i][j];\n\t\t\t\t//var newTG = mainGame.add.group({ classType: Soldier, runChildUpdate: true });\n\t\t\t\tvar newTower = TOWER_GROUP[archerStats.towerId].get(archerStats);\n\t\t\t\ttower.upgradeTower(pointer, newTower);\n\t\t\t\ttower.setText = newTower.towerName;\n\t\t\t}\n        }\n        else if (pointer.rightButtonDown())\n        {\n\t\t\tvar i = Math.floor(pointer.y/64);\n\t\t\tvar j = Math.floor(pointer.x/64);\n\t\t\tvar tower = map[i][j];\n\t\t\tif(typeof tower === \"object\")\n\t\t\t{\n\t\t\t\ttower.removeTower(pointer);\n\t\t\t}\n        }\n\t\telse if (pointer.middleButtonDown())\n\t\t{\n\t\t\t\n\t\t}\n\t});\n\t\n/* \tthis.arrow = this.input.keyboard.createCursorKeys();\n\tif (this.arrow.down.isDown) {\n\t   this.scene.pause();\n\t}  */\n}\n\n\n"]}